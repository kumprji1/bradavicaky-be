(this["webpackJsonpbradavicaky-fe"]=this["webpackJsonpbradavicaky-fe"]||[]).push([[0],{136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(19),o=n.n(s),i=(n(77),n(9)),u=n(10),p=n(7),l=Object(r.createContext)({userId:null,username:null,name:null,surname:null,role:null,token:null,login:function(){},logout:function(){}}),j=n(4),d=n.n(j),b=n(6),m=n(8),h=(n(80),n(0)),O=function(){return Object(h.jsxs)("div",{class:"lds-default",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})},x=function(e){return o.a.createPortal(Object(h.jsx)("div",{className:"error-backdrop",onClick:e.onClick}),document.getElementById("error-backdrop"))},f=(n(82),function(e){var t=Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(x,{onClick:e.onClear}),Object(h.jsxs)("div",{className:"error-modal",children:[Object(h.jsx)("header",{className:"error-modal__header",children:Object(h.jsx)("h2",{children:"\u0160vihnout a m\xe1vnout!"})}),Object(h.jsx)("div",{className:"error-modal__content ".concat(e.contentClass),children:e.error}),Object(h.jsx)("button",{className:"error-modal__button-ok",onClick:e.onClear,children:"Zav\u0159\xedt"}),Object(h.jsx)("footer",{className:"error-modal__footer ".concat(e.footerClass),children:e.footer})]})]});return o.a.createPortal(t,document.getElementById("error-modal"))}),v=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(p.a)(c,2),o=s[0],i=s[1],u=Object(r.useRef)([]),l=Object(r.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r,c,s,o,p,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{},a(!0),s=new AbortController,u.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:r,headers:c,signal:s.signal});case 9:return o=e.sent,e.next=12,o.json();case 12:if(p=e.sent,u.current=u.current.filter((function(e){return e!==s})),o.ok){e.next=16;break}throw new Error(p.msg);case 16:return a(!1),e.abrupt("return",p);case 20:throw e.prev=20,e.t0=e.catch(6),console.log(e.t0),i(e.t0.message),a(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){u.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:o,sendRequest:l,clearError:function(){i(null)}}},k="admin",N="pupil",y=(n(83),function(){var e=Object(r.useContext)(l),t=v(),n=t.sendRequest,a=t.isLoading,c=t.error,s=t.clearError,o=Object(u.f)(),i=function(){var t=Object(b.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/auth/login"),"POST",JSON.stringify({username:a.username,password:a.password}),{"Content-type":"application/json"});case 3:r=t.sent,e.login(r._id,r.username,r.name,r.surname,r.role,r.token),r.role===N?o.push("/odmeny"):o.push("/"),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"form--wrapper column",children:[Object(h.jsx)(m.c,{initialValues:{username:"",password:""},onSubmit:i,children:Object(h.jsxs)(m.b,{className:"custom_form",children:[Object(h.jsx)(m.a,{className:"text-input",name:"username",type:"text",placeholder:"U\u017eivatelsk\xe9 jm\xe9no"}),Object(h.jsx)(m.a,{className:"text-input",name:"password",type:"password",placeholder:"Heslo"}),Object(h.jsx)("button",{className:"button-submit",type:"submit",children:"Alohomora"})]})}),c&&Object(h.jsx)(f,{error:c,onClear:s}),Object(h.jsxs)("div",{className:"spinner--wrapper",children:[" ",a&&Object(h.jsx)(O,{})]})]})}),_=function(){var e=Object(u.f)(),t=v(),n=t.sendRequest,a=t.error,r=t.clearError,c=function(){var t=Object(b.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/auth/register-admin"),"POST",JSON.stringify(a),{"content-type":"application/json"});case 3:e.push("/prihlaseni"),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:"Registrace admina"}),Object(h.jsx)(m.c,{initialValues:{username:"",name:"",surname:"",password:"",rePassword:""},onSubmit:c,children:Object(h.jsxs)(m.b,{children:[Object(h.jsx)(m.a,{name:"username",type:"text",placeholder:"U\u017eivatelsk\xe9 jm\xe9no"}),Object(h.jsx)(m.a,{name:"name",type:"text",placeholder:"Jm\xe9no"}),Object(h.jsx)(m.a,{name:"surname",type:"text",placeholder:"P\u0159\xedjmen\xed"}),Object(h.jsx)(m.a,{name:"password",type:"password",placeholder:"Heslo"}),Object(h.jsx)(m.a,{name:"rePassword",type:"password",placeholder:" Heslo znovu"}),Object(h.jsx)("button",{type:"submit",children:"Registrace"})]})}),a&&Object(h.jsx)(f,{error:a,onClear:r})]})},w=function(){var e=Object(r.useContext)(l),t=Object(u.f)(),n=Object(r.useState)(""),a=Object(p.a)(n,2),c=a[0],s=a[1],o=v(),i=o.sendRequest,j=o.error,O=o.clearError,x=function(){var n=Object(b.a)(d.a.mark((function n(a){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/register-pupil"),"POST",JSON.stringify(a),{"content-type":"application/json",Authorization:"Bearer "+e.token});case 3:r=n.sent,s(r.msg),setTimeout((function(){return t.push("/")}),1200),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"form--wrapper",children:[Object(h.jsx)(m.c,{initialValues:{username:"",name:"",surname:"",password:"",rePassword:"",college:"nebelvir"},onSubmit:x,children:Object(h.jsxs)(m.b,{className:"custom_form",children:[Object(h.jsx)(m.a,{type:"hidden"}),Object(h.jsx)(m.a,{className:"text-input",name:"username",type:"text",placeholder:"U\u017eivatelsk\xe9 jm\xe9no"}),Object(h.jsx)(m.a,{className:"text-input",name:"name",type:"text",placeholder:"Jm\xe9no"}),Object(h.jsx)(m.a,{className:"text-input",name:"surname",type:"text",placeholder:"P\u0159\xedjmen\xed"}),Object(h.jsx)(m.a,{className:"text-input",name:"password",type:"password",placeholder:"Heslo"}),Object(h.jsx)(m.a,{className:"text-input",name:"rePassword",type:"password",placeholder:" Heslo znovu"}),Object(h.jsxs)(m.a,{as:"select",name:"college",children:[Object(h.jsx)("option",{value:"nebelv\xedr",children:"Nebelv\xedr"}),Object(h.jsx)("option",{value:"mrzimor",children:"Mrzimor"}),Object(h.jsx)("option",{value:"havrasp\xe1r",children:"Havrasp\xe1r"}),Object(h.jsx)("option",{value:"zmijozel",children:"Zmijozel"})]}),Object(h.jsx)("button",{className:"button-submit",type:"submit",children:"Registrace"}),Object(h.jsx)("p",{className:"responseMsg",children:c})]})}),j&&Object(h.jsx)(f,{error:j,onClear:O})]})},g=(n(87),function(){var e=Object(r.useContext)(l),t=Object(r.useState)([]),n=Object(p.a)(t,2),a=n[0],c=n[1],s=v().sendRequest;Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/pupils"),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+e.token});case 3:n=t.sent,c(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t(),console.log("fetchPupils()")}),[e.token]);var o,i=function(){var t=Object(b.a)(d.a.mark((function t(n,a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/add-points"),"PATCH",JSON.stringify({pupilsId:n,points:a}),{"Content-type":"application/json",Authorization:"Bearer "+e.token});case 2:"success"===(r=t.sent).msg&&c((function(e){return e.map((function(e){return e._id===n&&(e.points=r.points),e}))}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),u=function(){var t=Object(b.a)(d.a.mark((function t(n,a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/remove-points"),"PATCH",JSON.stringify({pupilsId:n,points:a}),{"Content-type":"application/json",Authorization:"Bearer "+e.token});case 2:"success"===(r=t.sent).msg&&c((function(e){return e.map((function(e){return e._id===n&&(e.points=r.points),e}))}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"pupils_page--wrapper",children:[Object(h.jsx)("h1",{className:"pupils_page--title",children:"\u010carod\u011bjov\xe9"}),Object(h.jsx)("ul",{className:"pupils_page--pupils",children:a&&(o=a,console.log(o),o.map((function(e){return Object(h.jsxs)("li",{className:"pupils_page--pupil",children:[Object(h.jsxs)("span",{className:"pupils_page--pupil__name",children:[e.name," ",e.surname]}),Object(h.jsxs)("div",{className:"pupils_page--pupil--points_wrapper",children:[Object(h.jsx)("button",{onClick:function(){return u(e._id,5)},className:"pupils_page--pupil__minus--button",children:"-"}),Object(h.jsx)("span",{className:"pupils_page--pupil__points",children:e.points}),Object(h.jsx)("button",{onClick:function(){return i(e._id,5)},className:"pupils_page--pupil__plus--button",children:"+"})]})]},e._id)})))})]})}),C=(n(52),function(){var e=Object(r.useContext)(l),t=v(),n=t.sendRequest,a=t.error,c=t.clearError,s=Object(u.f)(),o=function(){var t=Object(b.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/add-product"),"POST",JSON.stringify(a),{"content-type":"application/json",Authorization:"Bearer "+e.token});case 3:s.push("/obchod"),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"add_product--wrapper",children:[Object(h.jsx)("h1",{className:"add_product--title",children:"P\u0159id\xe1n\xed produktu"}),Object(h.jsx)(m.c,{initialValues:{title:"",photo:"",desc:"",price:"",quantity:""},onSubmit:o,children:Object(h.jsxs)(m.b,{className:"custom_form",children:[Object(h.jsx)(m.a,{className:"text-input",name:"title",type:"text",placeholder:"N\xe1zev"}),Object(h.jsx)(m.a,{className:"text-input",name:"photo",type:"text",placeholder:"Foto"}),Object(h.jsx)(m.a,{className:"text-input",name:"desc",type:"text",placeholder:"Popis"}),Object(h.jsx)(m.a,{className:"text-input",name:"price",type:"text",placeholder:"Cena"}),Object(h.jsx)(m.a,{className:"text-input",name:"quantity",type:"text",placeholder:"Po\u010det"}),Object(h.jsx)("button",{className:"button-submit",type:"submit",children:"P\u0159idat"})]})}),a&&Object(h.jsx)(f,{error:a,onClear:c})]})}),S=function(){var e,t=Object(r.useContext)(l),n=v(),a=n.sendRequest,c=n.error,s=n.clearError,o=Object(u.f)(),i=Object(r.useState)(),j=Object(p.a)(i,2),O=j[0],x=j[1],k=Object(u.g)().idProduktu;O&&(e={title:O.title,photo:O.photo,desc:O.desc,price:O.price,quantity:O.quantity}),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/product/").concat(k),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+t.token});case 3:n=e.sent,x(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[a,k]);var N=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/edit-product/").concat(k),"PATCH",JSON.stringify(n),{"content-type":"application/json",Authorization:"Bearer "+t.token});case 3:o.push("/obchod"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"add_product--wrapper",children:[Object(h.jsx)("h1",{className:"add_product--title",children:"P\u0159id\xe1n\xed produktu"}),e&&Object(h.jsx)(m.c,{initialValues:e,onSubmit:N,children:Object(h.jsxs)(m.b,{className:"custom_form",children:[Object(h.jsx)(m.a,{className:"text-input",name:"title",type:"text",placeholder:"N\xe1zev"}),Object(h.jsx)(m.a,{className:"text-input",name:"photo",type:"text",placeholder:"Foto"}),Object(h.jsx)(m.a,{className:"text-input",name:"desc",type:"text",placeholder:"Popis"}),Object(h.jsx)(m.a,{className:"text-input",name:"price",type:"text",placeholder:"Cena"}),Object(h.jsx)(m.a,{className:"text-input",name:"quantity",type:"text",placeholder:"Po\u010det"}),Object(h.jsx)("button",{className:"button-submit",type:"submit",children:"Ulo\u017eit"})]})}),c&&Object(h.jsx)(f,{error:c,onClear:s})]})},q=(n(88),function(e){var t=v().sendRequest,n=Object(r.useContext)(l),a=Object(u.f)(),c=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Pos\xedl\xe1\xe1m"),e.next=3,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/pupil/buy-product/").concat(r),"POST",null,{"Content-type":"application/json",Authorization:"Bearer "+n.token});case 3:e.sent,console.log("Vr\xe1\xe1tit na homepage"),a.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("li",{className:"product--wrapper",children:[Object(h.jsx)("div",{className:"product--title",children:e.title}),Object(h.jsx)("div",{className:"product_img--wrapper",children:Object(h.jsx)("img",{src:e.photo,alt:e.title})}),Object(h.jsxs)("div",{className:"product--quantity",children:["Ve sklepen\xed: ",Object(h.jsx)("span",{className:"bold",children:e.quantity})," ks"]}),Object(h.jsxs)("div",{className:"product--price",children:["Cena: ",Object(h.jsx)("span",{className:"bold",children:e.price})]}),Object(h.jsx)("div",{className:"product_buy--wrapper",children:Object(h.jsx)("button",{className:"button-submit",disabled:e.notEnoughMoney,onClick:function(){return c(e._id.toString())},children:"Akcio!"})})]},e._id)}),z=(n(89),function(e){var t,n=Object(r.useContext)(l),a=v().sendRequest,c=Object(r.useState)([]),s=Object(p.a)(c,2),o=s[0],i=s[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/pupil/avaible-products"),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+n.token});case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(h.jsx)("ul",{className:"products_page--pupils",children:o&&(t=o,t.map((function(t){return Object(h.jsx)(q,{_id:t._id,title:t.title,photo:t.photo,quantity:t.quantity,price:t.price,notEnoughMoney:e.points<t.price},t._id)})))})}),E=(n(90),function(){var e=Object(r.useContext)(l),t=v().sendRequest,n=Object(r.useState)(0),a=Object(p.a)(n,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){var n=function(){var n=Object(b.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/pupil/points/").concat(e.username),"GET",null,{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 2:a=n.sent,s(a.points);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.username]),Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"Dostupn\xe9 odm\u011bny"}),Object(h.jsxs)("p",{className:"pupils_market--points",children:["M\xe1te ",c," bradavi\u010d\xe1k\u016f"]}),Object(h.jsx)(z,{points:c})]})}),P=(n(91),function(){var e,t=v().sendRequest,n=Object(r.useContext)(l),a=Object(r.useState)([]),c=Object(p.a)(a,2),s=c[0],o=c[1],u=function(){var e=Object(b.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/disable-product/").concat(a),"PATCH",null,{"Content-type":"application/json",Authorization:"Bearer "+n.token});case 2:o((function(e){return e.filter((function(e){return e._id!==a}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/products"),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+n.token});case 2:a=e.sent,o(a.filter((function(e){return!e.isHidden})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"Obchod"}),Object(h.jsx)(i.b,{to:"pridat-produkt",className:"custom-page--create_link",children:"P\u0159idat produkt"}),Object(h.jsx)("ul",{className:"products_page--pupils",children:s&&(e=s,e.map((function(e){return Object(h.jsxs)("li",{className:"product--wrapper",children:[Object(h.jsx)("div",{className:"product--title",children:e.title}),Object(h.jsx)("div",{className:"product_img--wrapper",children:Object(h.jsx)("img",{src:e.photo,alt:e.title})}),Object(h.jsxs)("div",{className:"product--quantity",children:["Ve sklepen\xed: ",Object(h.jsx)("span",{className:"bold",children:e.quantity})," ks"]}),Object(h.jsxs)("div",{className:"product--price",children:["Cena: ",Object(h.jsx)("span",{className:"bold",children:e.price})]}),Object(h.jsxs)("div",{className:"product_buttons--wrapper",children:[Object(h.jsx)(i.b,{to:"/editovat-produkt/".concat(e._id),className:"small-button button-edit",children:" Upravit"}),Object(h.jsx)("button",{onClick:function(){return u(e._id)},className:"small-button button-delete",children:" Odstranit"})]})]},e._id)})))})]})}),A=function(e){v().sendRequest,Object(r.useContext)(l);return Object(h.jsxs)("li",{className:"product--wrapper",children:[Object(h.jsx)("div",{className:"product--title",children:e.title}),Object(h.jsx)("div",{className:"product_img--wrapper",children:Object(h.jsx)("img",{src:e.photo,alt:e.title})}),Object(h.jsx)("div",{className:"product_buy--wrapper"})]},e._id+Math.random())},T=function(){var e,t=Object(r.useContext)(l),n=v(),a=n.sendRequest,c=n.isLoading,s=Object(r.useState)([]),o=Object(p.a)(s,2),i=o[0],u=o[1];return Object(r.useEffect)((function(){if(t.token){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/pupil/undelivered-orders/").concat(t.userId),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+t.token});case 2:n=e.sent,u(n.map((function(e){return e.productId})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[t.userId,t.token]),Object(h.jsxs)("ul",{className:"products_page--pupils row",children:[i&&(e=i,e.map((function(e){return Object(h.jsx)(A,{_id:e._id,title:e.title,photo:e.photo,quantity:e.quantity,price:e.price},e._id+Math.random())}))),c&&Object(h.jsx)(O,{})]})},I=function(e){v().sendRequest,Object(r.useContext)(l);return Object(h.jsxs)("li",{className:"product--wrapper",children:[Object(h.jsx)("div",{className:"product--title",children:e.title}),Object(h.jsx)("div",{className:"product_img--wrapper",children:Object(h.jsx)("img",{src:e.photo,alt:e.title})}),Object(h.jsx)("div",{className:"product_buy--wrapper"})]},e._id+Math.random())},B=function(){var e,t=Object(r.useContext)(l),n=v(),a=n.sendRequest,c=n.isLoading,s=Object(r.useState)([]),o=Object(p.a)(s,2),i=o[0],u=o[1];return Object(r.useEffect)((function(){if(t.token){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/pupil/delivered-orders/").concat(t.userId),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+t.token});case 2:n=e.sent,u(n.map((function(e){return e.productId})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[t.userId,t.token]),Object(h.jsxs)("ul",{className:"products_page--pupils row",children:[i&&(e=i,e.map((function(e){return Object(h.jsx)(I,{_id:e._id,title:e.title,photo:e.photo,quantity:e.quantity,price:e.price},e._id+Math.random())}))),c&&Object(h.jsx)(O,{})]})},R=function(){return Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"\u010cek\xe1\u0161 sovu s:"}),Object(h.jsx)(T,{}),Object(h.jsx)("h1",{className:"custom-page--title",children:"Sova doru\u010dila:"}),Object(h.jsx)(B,{})]})},D=n(30),G=n.n(D),J=(n(92),function(){var e=v().sendRequest,t=Object(r.useContext)(l),n=Object(r.useState)([]),a=Object(p.a)(n,2),c=a[0],s=a[1];Object(r.useEffect)((function(){var n=function(){var n=Object(b.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/undelivered-orders"),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+t.token});case 3:a=n.sent,s(a),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);var o,i=function(){var n=Object(b.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/deliver-order/").concat(a),"PATCH",null,{"Content-type":"application/json",Authorization:"Bearer "+t.token});case 3:n.sent,s((function(e){return e.filter((function(e){return e._id!==a}))})),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"Objedn\xe1vky"}),Object(h.jsx)("ul",{className:"orders_page--pupils",children:c&&(o=c,o.map((function(e){return Object(h.jsxs)("li",{className:"order--wrapper",children:[Object(h.jsxs)("div",{className:"order_pupils-info--wrapper",children:[Object(h.jsxs)("div",{className:"order--pupils_name",children:[e.pupilId.name," ",e.pupilId.surname]}),Object(h.jsxs)("p",{className:"order--pupils_username",children:["(",e.pupilId.username,")"]}),Object(h.jsx)("p",{children:Object(h.jsx)("i",{children:"objednal/a:"})}),Object(h.jsx)("p",{children:Object(h.jsx)("i",{children:G()(e.orderedAt).format("DD. MM. YYYY")})})]}),Object(h.jsxs)("div",{className:"order_product-info--wrapper",children:[Object(h.jsx)("p",{className:"order_product--name",children:e.productId.title}),Object(h.jsx)("div",{className:"order_img--wrapper",children:Object(h.jsx)("img",{src:e.productId.photo,alt:e.productId.title})})]}),Object(h.jsx)("div",{className:"order_buttons--wrapper",children:Object(h.jsxs)("button",{className:"button-submit",onClick:function(){return i(e._id)},children:[" ","Porvrdit doru\u010den\xed"]})})]},e._id)})))})]})}),M=(n(93),function(){var e=Object(r.useContext)(l),t=Object(r.useState)([]),n=Object(p.a)(t,2),a=n[0],c=n[1],s=v().sendRequest;Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/events"),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+e.token});case 3:n=t.sent,c(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[]);var o,u=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/event/").concat(n),"DELETE",null,{"content-type":"application/json",Authorization:"Bearer "+e.token});case 3:t.sent,c(a.filter((function(e){return e._id!==n}))),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"Ud\xe1losti"}),Object(h.jsx)(i.b,{className:"custom-page--create_link",to:"/pridat-udalost",children:"P\u0159idat ud\xe1lost"}),Object(h.jsx)("ul",{className:"custom-page--events",children:a&&(o=a,console.log(o),o.map((function(e){return Object(h.jsxs)("li",{className:"events_page--event column",children:[Object(h.jsxs)("div",{className:"events_page--event_upper-wrapper column",children:[Object(h.jsx)("div",{className:"events_page--event__title",children:e.title}),Object(h.jsx)("div",{className:"events_page--event__date",children:Object(h.jsx)("i",{children:G()(e.date).format("DD. MM. YYYY")})})]}),Object(h.jsx)("div",{className:"events_page--event__desc",children:e.description}),Object(h.jsx)("div",{className:"events_page--event__buttons",children:Object(h.jsx)("button",{className:"small-button button-delete",onClick:function(){return u(e._id)},children:"Odstranit"})})]},e._id)})))})]})}),U=n(61),L=n.n(U),H=(n(94),n(69));Object(U.registerLocale)("cs",H.a);var Y=function(){var e=Object(r.useContext)(l),t=v(),n=t.sendRequest,a=t.error,c=t.clearError,s=Object(u.f)(),o=Object(r.useState)(""),i=Object(p.a)(o,2),j=i[0],m=i[1],O=Object(r.useState)(""),x=Object(p.a)(O,2),k=x[0],N=x[1],y=Object(r.useState)(new Date),_=Object(p.a)(y,2),w=_[0],g=_[1],C=function(){var t=Object(b.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/add-event"),"POST",JSON.stringify({title:j,description:k,date:w}),{"content-type":"application/json",Authorization:"Bearer "+e.token});case 4:s.push("/udalosti"),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"add_product--wrapper",children:[Object(h.jsx)("h1",{className:"add_product--title",children:"P\u0159id\xe1n\xed ud\xe1losti"}),Object(h.jsxs)("form",{className:"column",onSubmit:C,children:[Object(h.jsx)("input",{value:j,onChange:function(e){return m(e.target.value)},className:"text-input",name:"title",type:"text",placeholder:"N\xe1zev"}),Object(h.jsx)("input",{value:k,onChange:function(e){return N(e.target.value)},className:"text-input",name:"description",type:"text",placeholder:"Popis"}),Object(h.jsx)(L.a,{className:"datePicker",selected:w,onChange:function(e){return g(e)},locale:"cs"}),Object(h.jsx)("button",{className:"button-submit",type:"submit",children:"Odeslat"})]}),a&&Object(h.jsx)(f,{error:a,onClear:c})]})},F=function(){var e=Object(r.useContext)(l),t=Object(r.useState)([]),n=Object(p.a)(t,2),a=n[0],c=n[1],s=v().sendRequest;Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/events"),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+e.token});case 3:n=t.sent,c(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[]);var o;return Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"Ud\xe1losti"}),Object(h.jsx)("ul",{className:"custom-page--events",children:a&&(o=a,console.log(o),o.map((function(e){return Object(h.jsxs)("li",{className:"events_page--event column",children:[Object(h.jsxs)("div",{className:"events_page--event_upper-wrapper column",children:[Object(h.jsx)("div",{className:"events_page--event__title",children:e.title}),Object(h.jsx)("div",{className:"events_page--event__date",children:Object(h.jsx)("i",{children:G()(e.date).format("DD. MM. YYYY")})})]}),Object(h.jsx)("div",{className:"events_page--event__desc",children:e.description})]},e._id)})))})]})},V=(n(136),function(){var e=v().sendRequest,t=Object(r.useContext)(l),n=Object(r.useState)(),a=Object(p.a)(n,2),c=a[0],s=a[1];Object(r.useEffect)((function(){var n=function(){var n=Object(b.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/questions"),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+t.token});case 2:a=n.sent,s(a);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[t.token]);var o,u=function(){var n=Object(b.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/question/").concat(a),"DELETE",null,{"content-type":"application/json",Authorization:"Bearer "+t.token});case 3:n.sent,s(c.filter((function(e){return e._id!==a}))),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"Ot\xe1zky"}),t.role===k&&Object(h.jsx)(i.b,{className:"custom-page--create_link",to:"/pridat-otazku",children:"P\u0159idat ot\xe1zku"}),c&&(o=c,o.map((function(e){return Object(h.jsxs)("div",{className:"questions_page--question column",children:[Object(h.jsx)(i.b,{className:"question__link",to:"/otazka/".concat(e._id),children:Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"questions_page--question__text",children:e.text})})},e._id),Object(h.jsxs)("div",{className:"row",children:[t.role===k&&Object(h.jsx)(i.b,{className:"small-button button-edit",to:"/editovat-otazku/".concat(e._id),children:"Upravit"}),t.role===k&&Object(h.jsx)("button",{className:"small-button button-delete",onClick:function(){return u(e._id)},children:"Odebrat"})]})]})})))]})}),W=function(){var e=Object(r.useContext)(l),t=v(),n=t.sendRequest,a=t.error,c=t.clearError,s=Object(u.f)(),o=Object(r.useState)(""),i=Object(p.a)(o,2),j=i[0],m=i[1],O=function(){var t=Object(b.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/add-question"),"POST",JSON.stringify({text:j}),{"content-type":"application/json",Authorization:"Bearer "+e.token});case 4:r=t.sent,s.push("/editovat-otazku/"+r.question._id),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"add_product--wrapper",children:[Object(h.jsx)("h1",{className:"add_product--title",children:"Polo\u017een\xed ot\xe1zky"}),Object(h.jsxs)("form",{className:"column",onSubmit:O,children:[Object(h.jsx)("input",{value:j,onChange:function(e){return m(e.target.value)},className:"text-input",name:"text",type:"text",placeholder:"Ot\xe1zka"}),Object(h.jsx)("button",{className:"button-submit",type:"submit",children:"Odeslat"})]}),a&&Object(h.jsx)(f,{error:a,onClear:c})]})},Z=n(62),$=n(70),K=function(e){var t=e.questionId,n=e.addAnswerLocal,a=(e.deleteAnswerLocal,v()),c=a.sendRequest,s=a.error,o=a.clearError,i=Object(r.useContext)(l),u=Object(r.useState)(""),j=Object(p.a)(u,2),m=j[0],O=j[1],x=function(){var e=Object(b.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/create-answer"),"POST",JSON.stringify({questionId:t,text:m}),{"Content-type":"application/json",Authorization:"Bearer "+i.token});case 3:a=e.sent,O(""),n(a.answer),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},className:"column",children:[Object(h.jsx)("input",{value:m,onChange:function(e){return O(e.target.value)},className:"text-input",name:"text",type:"text",placeholder:"Odpov\u011b\u010f"}),Object(h.jsx)("button",{className:"small-button button-save",type:"submit",onClick:x,children:"Ulo\u017eit odpov\u011b\u010f"})]}),s&&Object(h.jsx)(f,{error:s,onClear:o})]})},Q=function(e){var t=e.questionId,n=v().sendRequest,a=Object(r.useContext)(l),c=Object(r.useState)([]),s=Object(p.a)(c,2),o=s[0],i=s[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/answers-of-question/").concat(t),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+a.token});case 3:r=e.sent,i(r),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[a.token,t]);var u,j=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/answer/").concat(t),"DELETE",null,{"Content-type":"application/json",Authorization:"Bearer "+a.token});case 3:e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:i((function(e){return e.filter((function(e){return e._id!==t}))}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"column",children:[Object(h.jsx)("h2",{className:"edit-page--answers_title",children:"Odpov\u011bdi na ot\xe1zku"}),o&&(u=o,u.map((function(e){return Object(h.jsx)("div",{className:"questions_page--question column",children:Object(h.jsx)("div",{className:"question__link",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"questions_page--question__text",children:e.text}),Object(h.jsx)("button",{className:"small-button button-delete",onClick:function(){return j(e._id)},children:"Odebrat"})]})},e._id)})}))),Object(h.jsx)("h3",{className:"edit-page--answers_title",type:"submit",children:"Nov\xe1 odpov\u011b\u010f"}),Object(h.jsx)(K,{questionId:t,addAnswerLocal:function(e){i((function(t){var n=Object($.a)(t);return n.push(e),n}))}})]})},X=function(){var e=Object(u.g)().idOtazky,t=v(),n=t.sendRequest,a=t.error,c=t.clearError,s=Object(r.useContext)(l),o=Object(r.useState)(),i=Object(p.a)(o,2),j=i[0],m=i[1];Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/question/").concat(e),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+s.token});case 2:a=t.sent,m(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[s.token]);var O=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/admin/edit-question/").concat(e),"PATCH",JSON.stringify({text:j.text}),{"Content-type":"application/json",Authorization:"Bearer "+s.token});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"add_product--wrapper",children:[Object(h.jsx)("h1",{className:"add_product--title",children:"Editace ot\xe1zky"}),j&&Object(h.jsxs)(r.Fragment,{children:[Object(h.jsxs)("form",{className:"column",onSubmit:function(e){e.preventDefault()},children:[Object(h.jsx)("input",{value:j.text,onChange:function(e){return m(Object(Z.a)(Object(Z.a)({},j),{},{text:e.target.value}))},className:"text-input",name:"text",type:"text",placeholder:"Ot\xe1zka"}),Object(h.jsx)("button",{className:"small-button button-save",type:"submit",onClick:O,children:"Ulo\u017eit nov\xe9 zn\u011bn\xed ot\xe1zky"})]}),a&&Object(h.jsx)(f,{error:a,onClear:c}),Object(h.jsx)(Q,{questionId:e})]})]})},ee=(n(137),function(){var e=v(),t=e.sendRequest,n=e.error,a=e.clearError,c=Object(r.useContext)(l),s=Object(u.g)().idOtazky,o=Object(r.useState)([]),i=Object(p.a)(o,2),j=i[0],m=i[1],O=Object(r.useState)([]),x=Object(p.a)(O,2),k=x[0],y=x[1],_=Object(r.useState)([]),w=Object(p.a)(_,2),g=w[0],C=w[1],S=Object(r.useState)(!1),q=Object(p.a)(S,2),z=q[0],E=q[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/question/").concat(s),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+c.token});case 3:n=e.sent,m(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[c.token,s]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/answers-of-question/").concat(s),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+c.token});case 3:n=e.sent,y(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[c.token,s]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/votes-of-question/").concat(s),"GET",null,{"Content-type":"application/json",Authorization:"Bearer "+c.token});case 3:n=e.sent,0===n.filter((function(e){return e.pupilId===c.userId&&e.questionId===s})).length&&E(!0),C(n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[c.token,s,z]);var P,A=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/pupil/add-vote"),"POST",JSON.stringify({questionId:s,answerId:n,pupilId:c.userId}),{"content-type":"application/json",Authorization:"Bearer "+c.token});case 3:E(!1),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"Ot\xe1zka"}),Object(h.jsxs)("div",{className:"column",children:[Object(h.jsx)("div",{className:"questions_page--question__text",children:j.text}),Object(h.jsx)("h1",{className:"question-page--answers-title",children:"Odpov\u011bdi:"}),k&&(P=k,P.map((function(e){return Object(h.jsx)("div",{className:"questions_page--question column",children:Object(h.jsx)("div",{className:"question__link",children:Object(h.jsxs)("div",{className:"row question_answers_votes",children:[Object(h.jsx)("div",{className:"questions_page--question__text",children:e.text}),z&&c.role===N&&Object(h.jsx)("button",{className:"small-button button-save",onClick:function(){return A(e._id)},children:"Hlasovat"}),Object(h.jsxs)("div",{className:"question_page--votes",children:[g.filter((function(t){return t.answerId===e._id})).length," hlas\u016f"]})]})},e._id)})})))]}),n&&Object(h.jsx)(f,{error:n,onClear:a})]})}),te=(n(138),function(){var e=Object(r.useContext)(l),t=v().sendRequest,n=Object(r.useState)(!1),a=Object(p.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(),i=Object(p.a)(o,2),u=i[0],j=i[1];Object(r.useState)((function(){var n=function(){var n=Object(b.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/pupil/can-roll/").concat(e.userId),"GET",null,{"content-type":"application/json",Authorization:"Bearer "+e.token});case 3:a=n.sent,s(a.canRoll),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[e.token,e.userId]);var m=function(){var n=Object(b.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t("".concat("https://prakticky-projekt-kumprecht.herokuapp.com","/api/pupil/roll"),"POST",null,{"content-type":"application/json",Authorization:"Bearer "+e.token});case 3:a=n.sent,s(!1),j(a.text),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"custom-page--wrapper",children:[Object(h.jsx)("h1",{className:"custom-page--title",children:"Zkus \u0161t\u011bst\xed ;)"}),Object(h.jsx)("button",{className:"small-button button-save",disabled:!c,onClick:m,children:"Zkusit \u0161t\u011bst\xed"}),Object(h.jsx)("h2",{className:"reward",children:u}),!c&&Object(h.jsx)("h2",{className:"reward",children:"Zkus to zase z\xedtra"})]})}),ne=(n(139),function(e){return o.a.createPortal(Object(h.jsx)("div",{className:"nav-backdrop",onClick:e.onClick}),document.getElementById("nav-backdrop"))}),ae=(n(140),function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useContext)(l),s=[Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/registrace-zaka",onClick:function(){return a(!1)},children:"Registrace \u017e\xe1ka"},"0"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/",onClick:function(){return a(!1)},children:"Seznam \u017e\xe1k\u016f"},"1"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/objednavky",onClick:function(){return a(!1)},children:"Objedn\xe1vky"},"2"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/obchod",onClick:function(){return a(!1)},children:"Obchod"},"3"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/udalosti",onClick:function(){return a(!1)},children:"Ud\xe1losti"},"3"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/otazky",onClick:function(){return a(!1)},children:"Ot\xe1zky"},"3")],o=Object(h.jsxs)(r.Fragment,{children:[Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/",onClick:function(){return a(!1)},children:"Profil \u010darod\u011bje"},"2"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/obchod",onClick:function(){return a(!1)},children:"Obchod"},"3"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/udalosti",onClick:function(){return a(!1)},children:"Ud\xe1losti"},"4"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/otazky",onClick:function(){return a(!1)},children:"Ot\xe1zky"},"3"),Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/stesti",onClick:function(){return a(!1)},children:"Zkus \u0161t\u011bst\xed"},"3")]});return c.token?Object(h.jsxs)("aside",{className:"mobile_nav--wrapper ".concat(n?"mobile_nav--showed":""),children:[n&&Object(h.jsx)(ne,{onClick:function(){return a(!1)}}),Object(h.jsx)("div",{className:"mobile_nav--show_button",onClick:function(){return a((function(e){return!e}))},children:"MENU"}),Object(h.jsx)("nav",{className:"mobile_nav",children:Object(h.jsxs)("ul",{className:"mobile_nav__links",children:[!c.token&&Object(h.jsx)(i.c,{className:"mobile_nav__link",to:"/prihlaseni",onClick:function(){return a(!1)},children:"P\u0159ihl\xe1\u0161en\xed"},"100"),c.role===k&&s,c.role===N&&o,c.token&&Object(h.jsxs)(i.b,{className:"mobile_nav__link",to:"/prihlaseni",onClick:function(){c.logout(),a(!1)},children:["Odhl\xe1sit se (",c.username,")"]},"101")]})})]}):null});n(141);var re=function(){var e=function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(),o=Object(p.a)(s,2),i=o[0],u=o[1],l=Object(r.useState)(),j=Object(p.a)(l,2),d=j[0],b=j[1],m=Object(r.useState)(),h=Object(p.a)(m,2),O=h[0],x=h[1],f=Object(r.useState)(),v=Object(p.a)(f,2),k=v[0],N=v[1],y=Object(r.useState)(),_=Object(p.a)(y,2),w=_[0],g=_[1],C=Object(r.useState)(),S=Object(p.a)(C,2),q=S[0],z=S[1],E=Object(r.useCallback)((function(e,t,n,a,r,s,o){c(e),u(t),b(n),x(a),N(r),g(s);var i=o||new Date((new Date).getTime()+36e6);z(i),localStorage.setItem("userData",JSON.stringify({userId:e,username:t,name:n,surname:a,role:r,token:s,expiration:i.toISOString()}))}),[]),P=Object(r.useCallback)((function(){c(null),u(null),b(null),x(null),N(null),g(null),z(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(w&&q){var e=q.getTime()-(new Date).getTime();a=setTimeout(P,e)}else clearTimeout(a)}),[w,P,q]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&E(e.userId,e.username,e.name,e.surname,e.role,e.token,new Date(e.expiration))}),[E]),{userId:n,username:i,name:d,surname:O,role:k,token:w,login:E,logout:P}}();return Object(h.jsx)(l.Provider,{value:e,children:Object(h.jsx)("div",{className:"app",children:Object(h.jsxs)(i.a,{children:[Object(h.jsx)(ae,{}),Object(h.jsxs)(u.c,{children:[Object(h.jsx)(u.a,{path:"/registrace-admina",component:_}),e.token&&Object(h.jsx)(u.a,{path:"/otazky",component:V}),e.token&&Object(h.jsx)(u.a,{path:"/otazka/:idOtazky",component:ee}),e.role===k&&Object(h.jsx)(u.a,{path:"/registrace-zaka",component:w}),e.role===k&&Object(h.jsx)(u.a,{path:"/pridat-produkt",component:C}),e.role===k&&Object(h.jsx)(u.a,{path:"/editovat-produkt/:idProduktu",component:S}),e.role===k&&Object(h.jsx)(u.a,{path:"/obchod",component:P}),e.role===k&&Object(h.jsx)(u.a,{path:"/objednavky",component:J}),e.role===k&&Object(h.jsx)(u.a,{path:"/udalosti",component:M}),e.role===k&&Object(h.jsx)(u.a,{path:"/pridat-udalost",component:Y}),e.role===k&&Object(h.jsx)(u.a,{path:"/pridat-otazku",component:W}),e.role===k&&Object(h.jsx)(u.a,{path:"/editovat-otazku/:idOtazky",component:X}),e.role===k&&Object(h.jsx)(u.a,{path:"/",component:g}),e.role===N&&Object(h.jsx)(u.a,{path:"/obchod",component:E}),e.role===N&&Object(h.jsx)(u.a,{path:"/udalosti",component:F}),e.role===N&&Object(h.jsx)(u.a,{path:"/stesti",component:te}),e.role===N&&Object(h.jsx)(u.a,{path:"/",component:R}),!e.token&&Object(h.jsx)(u.a,{path:"/prihlaseni",component:y}),!e.token&&Object(h.jsx)(u.a,{path:"/",component:y})]})]})})})},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(re,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ce?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):se(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):se(t,e)}))}}(),oe()},52:function(e,t,n){},77:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){}},[[143,1,2]]]);
//# sourceMappingURL=main.03225d7e.chunk.js.map